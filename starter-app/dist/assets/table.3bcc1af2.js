!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const{board:e}=window.miro,t={card:{textFields:["title","description"]},image:{textFields:["title","url"]},shape:{textFields:["content"]},sticky_note:{textFields:["content"]},text:{textFields:["content"]}};function n(e){var t=new Array;const n=[...e.matchAll("[$]{1}[a-zA-Z0-9äöüÄÖÜ]+")];for(var o of n)t.push(o[0].substring(1));return t}function o(e,t){var o=new Array;for(var i of t.textFields){const t=n(e[i]);o.push(...t)}return o}async function i(){var n={};for(var i in t){let d=await e.get({type:[i]});for(var l of d){const e=o(l,t[i]);(null==e?void 0:e.length)&&(n[l.id]=e)}}return n}async function l(e,n,o){var i=t[e.type];const l=e.width,d=e.height;for(var r of i.textFields)e[r]=e[r].replace("$"+n,o);e.width=l,e.height=d,await e.sync()}async function d(t){var n=await i(),o=a(),d=function(e,t){var n=new Array;for(var o in t)t[o].includes(e)&&n.push(o);return n}(t,n),r=o[t];if(null!=r&&null!=r&&""!=r)for(var s of d)try{l(await e.getById(s),t,r)}catch(c){console.log(c)}}function r(e){window.localStorage.setItem("variables",JSON.stringify(e))}function a(){var e=window.localStorage.getItem("variables");return JSON.parse(e)}function s(){var e=a();null!=e&&Object.keys(e).forEach((function(e){d(e)}))}window.appendToTable=function(e,t){console.log(e,t);let n=""+e,o="edit_"+e,i="var_"+e,l="val_"+e;document.getElementById("b1").style.display="inline",document.getElementById("input-field").style.display="none",document.getElementById("varinput").value=e,document.getElementById("valinput").value=t;var d='<button onclick="editVariable('+n+')" id="'+o+'" style="float:right; display:inline;" class="editButton xbutton"">edit</button>';document.getElementById("vtable-body").innerHTML+="<tr id="+n+">                            <td onmouseover=\"toggleVisible('"+o+'\')" scope="col">                                <div style="margin: 0;" id="'+i+'">'+e+'</div> </td><td id="'+l+'">'+t+"                            </td>                            <td>"+d+'</td>                            <td scope="col">                                <button onclick="removeRow('+n+')" class="xbutton">✕</button>                            </td>                        </tr>'},window.showVariableForm=function(){document.getElementById("varinput").value="",document.getElementById("valinput").value="",document.getElementById("b1").style.display="none",document.getElementById("input-field").style.display="inline"},window.removeRow=function(e){if(console.log(e),"string"==typeof editId){var t=a();r(Object.keys(t).filter((t=>t==e)).reduce(((e,n)=>(e[n]=t[n],e)),{})),document.getElementById(e).remove()}else{t=a();r(Object.keys(t).filter((t=>t==e.id)).reduce(((e,n)=>(e[n]=t[n],e)),{})),document.getElementById(e.id).remove()}},window.toggleVisible=function(e){if("string"==typeof e){document.getElementById(e).style.display="inline"}else{document.getElementById(e.id).style.display="inline"}},window.toggleInvisible=function(e){if("string"==typeof e){document.getElementById(e).style.display="none"}else{document.getElementById(e.id).style.display="none"}},window.createTable=async function(){var e={},t=a();for(d in console.log(t),t)e[d]=t[d];var n=await i();for(var o in n){var l=n[o];for(d of l)d in e||(e[d]="")}for(var d in r(e),console.log("Table created with values: "),console.log(a()),e)appendToTable(d,e[d])},window.editVariable=function(e){toggleVisible("edit-field"),toggleInvisible("input-field"),toggleInvisible("b1"),document.getElementById("varedit").value=e.id,document.getElementById("varedit").disabled="disabled",document.getElementById("valedit").value=a()[e.id]},window.saveEdit=function(){let e=document.getElementById("varedit"),t=document.getElementById("valedit");document.getElementById("val_"+e.value).innerHTML=t.value;var n=a();n[e.value]=t.value,r(n),console.log(a()),d(e.value),toggleInvisible("edit-field"),toggleVisible("b1")},window.saveVariable=async function(){var e=document.getElementById("varinput").value,t=document.getElementById("valinput").value,n=a();appendToTable(e,t),console.log(n),n[e]=t,console.log(n),r(n),d(e)};export{a as l,s as p,r as s};
