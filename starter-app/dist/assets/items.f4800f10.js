const{board:t}=window.miro,r={card:{textFields:["title","description"]},image:{textFields:["title","url"]},shape:{textFields:["content"]},sticky_note:{textFields:["content"]},text:{textFields:["content"]}};function e(t){var r=new Array;const e=[...t.matchAll("[$]{1}[a-zA-Z0-9äöüÄÖÜ]+")];for(var n of e)r.push(n[0].substring(1));return r}function n(t,r){var n=new Array;for(var a of r.textFields){const r=e(t[a]);n.push(...r)}return n}async function a(){var e={};for(var a in r){let i=await t.get({type:[a]});for(var o of i){const t=n(o,r[a]);(null==t?void 0:t.length)&&(e[o.id]=t)}}return e}function o(t,r){var e=new Array;for(var n in r){r[n].includes(t)&&e.push(n)}return e}function i(t,e,n){var a=r[t.type];for(var o of a.textFields)t[o]=t[o].replace("$"+e,n);t.sync()}async function c(){var r=await a(),e=t.getAppData("variables");for(var n in e){var c=o(n,r);for(var s of c){var l=e[n];try{i(await t.getById(s),variable,l)}catch(f){console.log(f)}}}}export{a as findVariables,c as setVariables};
